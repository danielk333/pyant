

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Vectorized coordinate functions &#8212; PyAnt 0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="../api.html" />
    <link rel="prev" title="Interpolated Antenna array gain" href="plot_interp_antenna.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api.html" title="API Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_interp_antenna.html" title="Interpolated Antenna array gain"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnt 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Examples</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="plot_interp_antenna.html"
                        title="previous chapter">Interpolated Antenna array gain</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../api.html"
                        title="next chapter">API Reference</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/auto_gallery/vectorized_coordinate_functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-gallery-vectorized-coordinate-functions-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="vectorized-coordinate-functions">
<span id="sphx-glr-auto-gallery-vectorized-coordinate-functions-py"></span><h1>Vectorized coordinate functions<a class="headerlink" href="#vectorized-coordinate-functions" title="Permalink to this headline">Â¶</a></h1>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[[0 1]
 [1 1]
 [0 0]]
90.0
45.00000000000001
[90. 45.]
[152.47520052  47.65824928  15.77639954  70.6832322   47.73320281
  44.57121559  76.04631964 146.2230476   19.32157762  35.53330669
  82.58057756  46.79562144  45.26308388 127.75966112  28.34830136
  85.13451933  82.70007112  76.41429248  94.21526109  46.81321588
  63.4198988  100.37858952  64.23506443  52.00542242  30.38817335
 111.8005347  102.4585908   63.75332836  95.81801057 111.04522015
 118.63948007 128.29211131  98.81628029  80.19663372  92.63441245
  47.0582532   55.69015812 102.10403371 171.77749475  53.80562846
  50.06677944  83.64411297  77.52259282  70.96124981 163.18719176
  56.51867033 106.93622945  27.91679013 131.42675596  49.29558425
  51.9865435   40.47066083 127.96462255 116.51786838  63.84334247
  82.56581016  75.76065906  71.77409521  29.70319225 118.18346088
 116.807051    58.75315923 145.81898391  35.92113462 155.32593807
 108.18463045  49.35887079  76.94905544  45.43613689  72.13987538
  60.65111018 163.67691805 160.81749545  97.50217545 119.49741961
 145.94232499 146.46117313  65.21301073  63.75946921 114.57320645
  69.01479682  61.33181562  39.34163114 139.31930522 118.86888362
  53.63885955  72.85461379  75.91575223  52.81043578  45.31713763
  71.96422111  57.0232131  167.62351902  92.73360821 111.10078451
 138.15617458  78.03403213  19.25598619  41.95633721  97.88513614]
&quot;vector_angle&quot; (100) loop       performance: 1.9e+00 seconds
&quot;vector_angle&quot; (100) vectorized performance: 3.0e-02 seconds
[[  0. 120.]
 [ 45.  85.]
 [  1.   1.]]
[0.         0.70710678 0.70710678]
[ 0.07547909 -0.04357787  0.9961947 ]
[[ 0.          0.07547909]
 [ 0.70710678 -0.04357787]
 [ 0.70710678  0.9961947 ]]
[[-0.0118186   0.01130735  0.0125578  -0.03632938 -0.01837481 -0.00676333
  -0.01555383 -0.01421832 -0.02492175  0.02725418]
 [ 0.99989547  0.99988428  0.99991021  0.99913855  0.99982529  0.99997471
   0.99945922  0.99985928  0.9996888   0.99892594]
 [-0.00832923 -0.01017735  0.00467729 -0.02005839  0.00342867  0.00220043
   0.02897143 -0.00890324  0.00109943 -0.03747232]]
&quot;sph_to_cart&quot; (100) loop       performance: 1.4e+00 seconds
&quot;sph_to_cart&quot; (100) vectorized performance: 1.5e-02 seconds
[[1. 0.]
 [1. 0.]
 [1. 1.]]
[45.         35.26438968  1.73205081]
[ 0. 90.  1.]
[[45.          0.        ]
 [35.26438968 90.        ]
 [ 1.73205081  1.        ]]
[[260.26489168 204.92159192 138.95268341  -8.19873344  76.68906573
   85.68191755 -79.46666999 175.35936443  64.74577274  74.51318934]
 [ -7.32443814  36.17585313 -32.31822633  56.7131808   31.5251008
   18.31309289  17.58387806 -19.29388185 -21.01528605 -19.08003683]
 [  2.06417287   1.81673157   2.09217726   0.49446199   1.91455158
    2.85174772   1.13305975   2.00473059   0.67192628   1.82019826]]
&quot;cart_to_sph&quot; (100) loop       performance: 1.3e+00 seconds
&quot;cart_to_sph&quot; (100) vectorized performance: 3.6e-02 seconds
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyant</span>

<span class="kn">import</span> <span class="nn">timeit</span>

<span class="n">number</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">def</span> <span class="nf">coordinates_vector_angle</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">c</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">bc</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">c</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">bc</span><span class="p">)</span>

    <span class="n">th_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ab</span><span class="p">)</span>

    <span class="n">th_ac</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ac</span><span class="p">)</span>

    <span class="n">th_abc</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">bc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_abc</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

    <span class="n">th_ax</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ax</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.vector_angle(a,y))</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.vector_angle(a,y)</span>
<span class="sd">&#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span><span class="o">=</span>
        <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">a = np.array([1,0,0])</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.vector_angle(a,x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span><span class="o">=</span>
    <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">a = np.array([1,0,0])</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;vector_angle&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;vector_angle&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">coordinates_sph_to_cart</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">120</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">ab</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

    <span class="n">sph_a</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_a</span><span class="p">)</span>

    <span class="n">sph_b</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_b</span><span class="p">)</span>

    <span class="n">sph_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_ab</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">,:]</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">sph_x</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_x</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.sph_to_cart(y))</span>

    <span class="n">setup</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">x[2,:] = 1.0</span>
<span class="s1">&#39;&#39;&#39;</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.sph_to_cart(y)</span>
<span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.sph_to_cart(x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;sph_to_cart&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;sph_to_cart&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">coordinates_cart_to_sph</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">ab</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

    <span class="n">sph_a</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_a</span><span class="p">)</span>

    <span class="n">sph_b</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_b</span><span class="p">)</span>

    <span class="n">sph_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_ab</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">sph_x</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_x</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.cart_to_sph(y))</span>

    <span class="n">setup</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">&#39;&#39;&#39;</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.cart_to_sph(y)</span>
<span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.cart_to_sph(x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;cart_to_sph&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;cart_to_sph&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="n">coordinates_vector_angle</span><span class="p">()</span>
<span class="n">coordinates_sph_to_cart</span><span class="p">()</span>
<span class="n">coordinates_cart_to_sph</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  4.710 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-gallery-vectorized-coordinate-functions-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/2a4cf881efccec3dbfc732dd9577d93d/vectorized_coordinate_functions.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">vectorized_coordinate_functions.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/c93e4b495a5baf01c5a890ee0ae11521/vectorized_coordinate_functions.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">vectorized_coordinate_functions.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api.html" title="API Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_interp_antenna.html" title="Interpolated Antenna array gain"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnt 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Examples</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020-2020, Daniel Kastinen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.
    </div>
  </body>
</html>