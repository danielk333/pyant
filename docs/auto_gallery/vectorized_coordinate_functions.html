

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Vectorized coordinate functions &#8212; PyAnt 0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="../api.html" />
    <link rel="prev" title="Interpolated Antenna array gain" href="plot_interp_antenna.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api.html" title="API Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_interp_antenna.html" title="Interpolated Antenna array gain"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnt 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Examples</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="plot_interp_antenna.html"
                        title="previous chapter">Interpolated Antenna array gain</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../api.html"
                        title="next chapter">API Reference</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/auto_gallery/vectorized_coordinate_functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-gallery-vectorized-coordinate-functions-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="vectorized-coordinate-functions">
<span id="sphx-glr-auto-gallery-vectorized-coordinate-functions-py"></span><h1>Vectorized coordinate functions<a class="headerlink" href="#vectorized-coordinate-functions" title="Permalink to this headline">Â¶</a></h1>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[[0 1]
 [1 1]
 [0 0]]
90.0
45.00000000000001
[90. 45.]
[ 68.06060928  64.44403004 147.22335708  40.86841157 103.03787612
  99.96185124  56.36159355 132.80361456  51.31069176  62.9607813
 140.63792965  92.48069822 146.22454306 100.46561485 119.12442932
  79.58122085 143.69342     93.98432507  47.10018076 149.01603946
  84.2026655   84.15221942 110.76212206 131.51805764  72.84768235
  72.15243454  84.53764055 132.7545784  113.22081922 155.45535
 109.9655733   16.31425561 109.10238879 155.02710471  89.48765473
 104.474103    66.96965137  79.35592525 162.39050327  23.52699885
  67.33590576 129.94222564 142.45500497  39.17167048 104.39235605
  70.09864267  32.00380595  21.79303941  91.67959653  92.20740787
  46.55610414  94.32447688 130.08399461  76.73324824  73.6694332
 104.49871304  28.276935    49.44338738  11.33264329  19.62253055
 102.58751784  48.17204362 122.25170423  27.71685467 111.05165311
 138.52157002 105.93881388  76.0273971  138.98296019  49.0161775
  57.01961445  84.34700506  90.3920307  138.06219816  56.70562863
 125.28685401  51.16011031 174.80120075  93.67771216  16.45021705
  93.84734492 140.35837706 121.75423173  19.88484971 113.26008097
 135.249041    89.55794255  41.6750644  170.37425903  62.80913201
  32.0109425   49.31021391  80.02503748  74.70109777 170.40158538
  92.29135597 148.8915862  144.74054351  64.005617    91.23803867]
&quot;vector_angle&quot; (100) loop       performance: 2.0e+00 seconds
&quot;vector_angle&quot; (100) vectorized performance: 2.6e-02 seconds
[[  0. 120.]
 [ 45.  85.]
 [  1.   1.]]
[0.         0.70710678 0.70710678]
[ 0.07547909 -0.04357787  0.9961947 ]
[[ 0.          0.07547909]
 [ 0.70710678 -0.04357787]
 [ 0.70710678  0.9961947 ]]
[[ 0.01873133 -0.00432245  0.01405931  0.01279095 -0.02387233  0.00640837
   0.00374267 -0.01943662 -0.00201378  0.01439904]
 [ 0.99959601  0.99998879  0.99970646  0.99990262  0.9997109   0.99989588
   0.99994815  0.99968299  0.9998922   0.99959852]
 [-0.02137633  0.00193179 -0.01973122 -0.00558051 -0.00286714  0.01292879
   0.00947014  0.01600415  0.01454418 -0.02440224]]
&quot;sph_to_cart&quot; (100) loop       performance: 1.3e+00 seconds
&quot;sph_to_cart&quot; (100) vectorized performance: 1.7e-02 seconds
[[1. 0.]
 [1. 0.]
 [1. 1.]]
[45.         35.26438968  1.73205081]
[ 0. 90.  1.]
[[45.          0.        ]
 [35.26438968 90.        ]
 [ 1.73205081  1.        ]]
[[226.14377802 221.30259875 241.05375502  40.6411154  105.00483419
   49.53843752 101.77811961 -77.36919229 -47.24219298  90.75065679]
 [-29.35815468  69.78580258   9.7067689    2.13984389  62.70191109
   25.99131943  21.16078065 -22.16943226 -32.60091889  58.51654524]
 [  0.41821126   2.05432133   2.49527324   1.447207     0.98560243
    2.1958699    1.32342451   2.63511118   0.2557918    0.42271237]]
&quot;cart_to_sph&quot; (100) loop       performance: 1.3e+00 seconds
&quot;cart_to_sph&quot; (100) vectorized performance: 4.0e-02 seconds
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyant</span>

<span class="kn">import</span> <span class="nn">timeit</span>

<span class="n">number</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">def</span> <span class="nf">coordinates_vector_angle</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">c</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">bc</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">c</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">bc</span><span class="p">)</span>

    <span class="n">th_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ab</span><span class="p">)</span>

    <span class="n">th_ac</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ac</span><span class="p">)</span>

    <span class="n">th_abc</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">bc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_abc</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

    <span class="n">th_ax</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ax</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.vector_angle(a,y))</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.vector_angle(a,y)</span>
<span class="sd">&#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span><span class="o">=</span>
        <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">a = np.array([1,0,0])</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.vector_angle(a,x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span><span class="o">=</span>
    <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">a = np.array([1,0,0])</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;vector_angle&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;vector_angle&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">coordinates_sph_to_cart</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">120</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">ab</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

    <span class="n">sph_a</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_a</span><span class="p">)</span>

    <span class="n">sph_b</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_b</span><span class="p">)</span>

    <span class="n">sph_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_ab</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">,:]</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">sph_x</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_x</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.sph_to_cart(y))</span>

    <span class="n">setup</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">x[2,:] = 1.0</span>
<span class="s1">&#39;&#39;&#39;</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.sph_to_cart(y)</span>
<span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.sph_to_cart(x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;sph_to_cart&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;sph_to_cart&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">coordinates_cart_to_sph</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">ab</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

    <span class="n">sph_a</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_a</span><span class="p">)</span>

    <span class="n">sph_b</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_b</span><span class="p">)</span>

    <span class="n">sph_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_ab</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">sph_x</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_x</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.cart_to_sph(y))</span>

    <span class="n">setup</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">&#39;&#39;&#39;</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.cart_to_sph(y)</span>
<span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.cart_to_sph(x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;cart_to_sph&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;cart_to_sph&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="n">coordinates_vector_angle</span><span class="p">()</span>
<span class="n">coordinates_sph_to_cart</span><span class="p">()</span>
<span class="n">coordinates_cart_to_sph</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  4.694 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-gallery-vectorized-coordinate-functions-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/2a4cf881efccec3dbfc732dd9577d93d/vectorized_coordinate_functions.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">vectorized_coordinate_functions.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/c93e4b495a5baf01c5a890ee0ae11521/vectorized_coordinate_functions.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">vectorized_coordinate_functions.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api.html" title="API Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_interp_antenna.html" title="Interpolated Antenna array gain"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnt 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Examples</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020-2020, Daniel Kastinen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.
    </div>
  </body>
</html>