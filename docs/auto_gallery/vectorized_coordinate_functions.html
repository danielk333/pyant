

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Vectorized coordinate functions &#8212; PyAnt 0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="../api.html" />
    <link rel="prev" title="Interpolated Antenna array gain" href="plot_interp_antenna.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api.html" title="API Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_interp_antenna.html" title="Interpolated Antenna array gain"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnt 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Examples</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="plot_interp_antenna.html"
                        title="previous chapter">Interpolated Antenna array gain</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../api.html"
                        title="next chapter">API Reference</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/auto_gallery/vectorized_coordinate_functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-gallery-vectorized-coordinate-functions-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="vectorized-coordinate-functions">
<span id="sphx-glr-auto-gallery-vectorized-coordinate-functions-py"></span><h1>Vectorized coordinate functions<a class="headerlink" href="#vectorized-coordinate-functions" title="Permalink to this headline">Â¶</a></h1>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[[0 1]
 [1 1]
 [0 0]]
90.0
45.00000000000001
[90. 45.]
[ 63.17540041  60.09108103 116.85216292 127.09584399  78.397541
  57.08846897 130.31341867  46.78115895 122.50599372 122.4710964
  70.81584609  99.47616363  62.1668323  114.23273139  85.66494047
  59.25677434  75.28794825  73.32477565 176.76361119  49.97238227
  63.19497384  69.22435712  89.50755228  62.99995827 147.95195633
  74.34316634  90.52317412 138.64714482  59.65924131 128.18434772
  67.80332322 100.73721247  41.72140911 143.29212276  76.27076978
  67.52419462  69.29738125 124.70961468  53.86053277  70.97333804
  42.27805585 101.77661457  74.8816984   78.64661537  64.14287648
 125.87997697  60.89317221  34.45004273 143.66819253 131.32838142
  53.60580414 123.77564557 155.30188427  88.50624804 137.09124555
 135.17482062  76.83767872 135.46449728 105.09062804  36.5622093
  83.67941534  74.0723582   68.87777706 133.89725549 134.78655632
  83.69828127 134.4699616   53.8628076   72.17131529  68.66811458
  81.55826904 113.29776567  91.76836824  56.48154111  80.00182459
  95.73899719  98.27862432 165.05831078  64.39999861 129.18073423
  31.19843888 157.56630353  45.70558045 125.51962715  71.28847545
  85.78256767  61.47044178  79.98299227 137.10038053 121.75283195
  58.15146938  74.24278001 127.30286858  41.55575885  90.4351392
  86.38354058  81.02002842  59.9049865   97.4145924   31.87717261]
&quot;vector_angle&quot; (100) loop       performance: 1.9e+00 seconds
&quot;vector_angle&quot; (100) vectorized performance: 2.5e-02 seconds
[[  0. 120.]
 [ 45.  85.]
 [  1.   1.]]
[0.         0.70710678 0.70710678]
[ 0.07547909 -0.04357787  0.9961947 ]
[[ 0.          0.07547909]
 [ 0.70710678 -0.04357787]
 [ 0.70710678  0.9961947 ]]
[[-1.23549360e-02  1.53292878e-03  1.80150415e-02 -5.17233224e-02
  -3.55007884e-02 -2.96968232e-02 -1.54579462e-02  4.17432277e-03
   2.80504191e-03  1.68162868e-02]
 [ 9.99842714e-01  9.99998305e-01  9.99827986e-01  9.98542983e-01
   9.98995065e-01  9.99361555e-01  9.99861286e-01  9.99990925e-01
   9.99944917e-01  9.99811880e-01]
 [ 1.27240791e-02  1.02008612e-03 -4.41104611e-03  1.53820976e-02
   2.73597253e-02  1.98640797e-02 -6.20166179e-03  8.51557023e-04
   1.01140611e-02  9.66527779e-03]]
&quot;sph_to_cart&quot; (100) loop       performance: 1.3e+00 seconds
&quot;sph_to_cart&quot; (100) vectorized performance: 1.4e-02 seconds
[[1. 0.]
 [1. 0.]
 [1. 1.]]
[45.         35.26438968  1.73205081]
[ 0. 90.  1.]
[[45.          0.        ]
 [35.26438968 90.        ]
 [ 1.73205081  1.        ]]
[[ 12.00147631 127.13597827 -54.72624762 224.86068937 -28.91443764
   40.6179913   95.20129549 -58.32434579 -57.19350229  -9.23281406]
 [ -1.30339108 -12.21245847  46.81163945 -11.83591143  15.45723279
   79.6774592  -54.1334088   11.52834004  32.86522289 -67.3340315 ]
 [  0.95025735   1.16446234   1.05763291   3.10849213   1.446238
    1.38574186   2.23266086   1.27806676   3.26410424   1.42409469]]
&quot;cart_to_sph&quot; (100) loop       performance: 1.2e+00 seconds
&quot;cart_to_sph&quot; (100) vectorized performance: 3.5e-02 seconds
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyant</span>

<span class="kn">import</span> <span class="nn">timeit</span>

<span class="n">number</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">def</span> <span class="nf">coordinates_vector_angle</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">c</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">bc</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">c</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">bc</span><span class="p">)</span>

    <span class="n">th_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ab</span><span class="p">)</span>

    <span class="n">th_ac</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ac</span><span class="p">)</span>

    <span class="n">th_abc</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">bc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_abc</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

    <span class="n">th_ax</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">th_ax</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.vector_angle(a,y))</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.vector_angle(a,y)</span>
<span class="sd">&#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span><span class="o">=</span>
        <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">a = np.array([1,0,0])</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.vector_angle(a,x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span><span class="o">=</span>
    <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">a = np.array([1,0,0])</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;vector_angle&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;vector_angle&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">coordinates_sph_to_cart</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">120</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">ab</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

    <span class="n">sph_a</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_a</span><span class="p">)</span>

    <span class="n">sph_b</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_b</span><span class="p">)</span>

    <span class="n">sph_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_ab</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">,:]</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">sph_x</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">sph_to_cart</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_x</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.sph_to_cart(y))</span>

    <span class="n">setup</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">x[2,:] = 1.0</span>
<span class="s1">&#39;&#39;&#39;</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.sph_to_cart(y)</span>
<span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.sph_to_cart(x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;sph_to_cart&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;sph_to_cart&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">coordinates_cart_to_sph</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.generic.html#numpy.generic" title="numpy.generic" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class"><span class="n">np</span><span class="o">.</span><span class="n">float64</span></a><span class="p">)</span>
    <span class="n">ab</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.append.html#numpy.append" title="numpy.append" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

    <span class="n">sph_a</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_a</span><span class="p">)</span>

    <span class="n">sph_b</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_b</span><span class="p">)</span>

    <span class="n">sph_ab</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_ab</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.randn.html#numpy.random.randn" title="numpy.random.randn" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">sph_x</span> <span class="o">=</span> <span class="n">pyant</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">cart_to_sph</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sph_x</span><span class="p">)</span>
    <span class="c1"># As opposed to</span>
    <span class="c1">#</span>
    <span class="c1"># for y in x.T:</span>
    <span class="c1">#     print(pyant.coordinates.cart_to_sph(y))</span>

    <span class="n">setup</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pyant</span>
<span class="s1">import numpy as np</span>
<span class="s1">x = np.random.randn(3,</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">)</span>
<span class="s1">&#39;&#39;&#39;</span>

    <span class="n">dt_l</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">for y in x.T:</span>
<span class="sd">    pyant.coordinates.cart_to_sph(y)</span>
<span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">dt_v</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
        <span class="s1">&#39;pyant.coordinates.cart_to_sph(x)&#39;</span><span class="p">,</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">setup</span><span class="p">,</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;cart_to_sph&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) loop       performance: </span><span class="si">{</span><span class="n">dt_l</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;cart_to_sph&quot; (</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s1">) vectorized performance: </span><span class="si">{</span><span class="n">dt_v</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>



<span class="n">coordinates_vector_angle</span><span class="p">()</span>
<span class="n">coordinates_sph_to_cart</span><span class="p">()</span>
<span class="n">coordinates_cart_to_sph</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  4.527 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-gallery-vectorized-coordinate-functions-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/2a4cf881efccec3dbfc732dd9577d93d/vectorized_coordinate_functions.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">vectorized_coordinate_functions.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/c93e4b495a5baf01c5a890ee0ae11521/vectorized_coordinate_functions.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">vectorized_coordinate_functions.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api.html" title="API Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_interp_antenna.html" title="Interpolated Antenna array gain"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnt 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Examples</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020-2020, Daniel Kastinen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.
    </div>
  </body>
</html>